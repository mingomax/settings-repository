[includeIf "gitdir:${HOME}/Workspaces/Personal/**"]
  path = ${HOME}/Workspaces/Personal/dotfiles/git/personal.gitconfig

[includeIf "gitdir:${HOME}/Workspaces/Work/**"]
  path = ${HOME}/Workspaces/Personal/dotfiles/git/work.gitconfig

# Branch padrão e pulls mais seguros
[init]
  defaultBranch = main

[pull]
	rebase = true

[rebase]
  autosquash = true
	autoStash = true

[fetch]
	prune = true

[color]
  ui = auto

[core]
  # Editor: detectado dinamicamente no setup.sh
  # Fallback: se EDITOR não estiver setado, usa código padrão
  editor = code -w
  autocrlf = input # normaliza LF no commit
  whitespace = space-before-tab,indent-with-non-tab,trailing-space,cr-at-eol
  excludesFile = ~/.gitignore
  attributesFile = ~/.gitattributes

[help]
  autocorrect = 1

# Diff/merge no VS Code
[diff]
  tool = vscode

[difftool "vscode"]
  cmd = code-insiders --wait --diff "$LOCAL" "$REMOTE"

[merge]
  tool = vscode
  conflictstyle = diff3

[mergetool "vscode"]
  cmd = code-insiders --wait "$MERGED"
  prompt = false

# Pager de diffs (usa 'delta' se instalado)
[pager]
  log = delta
  reflog = delta

[delta]
  navigate = true
  line-numbers = true
  syntax-theme = OneHalfDark
  side-by-side = true

# Push: facilitar primeiro push
[push]
  autoSetupRemote = true

[credential]
  helper = libsecret

[gpg]
  format = ssh
  program = gpg

[gpg "ssh"]
  allowedSignersFile = ~/.config/git/allowed_signers

[commit]
  gpgsign = true

# Alias úteis (compatíveis com atalhos do zsh)
[alias]
  unstage = restore --staged .
  last = log -1 HEAD
  nb = "!f(){ git switch -c \"$1\"; }; f"
  cm = "!f(){ git commit -m \"$*\"; }; f"
  amend = commit --amend --no-edit
  # Undo last commit but keep changes
  soft = reset --soft HEAD~1
  # Push current branch (set upstream)
  pc = push -u origin HEAD
  # lg = log --oneline --graph --decorate -n 30
  please = push --force-with-lease
