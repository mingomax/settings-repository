#!/usr/bin/env bash
set -euo pipefail

sudo chown -R "$USER:$USER" "$HOME/.ssh"
chmod 700 "$HOME/.ssh"
chmod 700 "$HOME/.ssh/config.d" "$HOME/.ssh/keys" 2>/dev/null || true
chmod 600 "$HOME/.ssh/config" "$HOME/.ssh/config.d"/*.conf 2>/dev/null || true
chmod 600 "$HOME/.ssh/keys"/id_* 2>/dev/null || true
chmod 644 "$HOME/.ssh/keys"/*.pub 2>/dev/null || true
chmod 644 "$HOME/.ssh/known_hosts" 2>/dev/null || true

echo "OK: SSH permissions fixed."
